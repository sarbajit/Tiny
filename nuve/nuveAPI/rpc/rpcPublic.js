var tokenRegistry=require("./../mdb/tokenRegistry"),serviceRegistry=require("./../mdb/serviceRegistry"),roomRegistry=require("./../mdb/roomRegistry"),cloudHandler=require("./../cloudHandler"),logger=require("../logger").logger,Room=require("../resource/room"),log=logger.getLogger("RPCPublic");exports.deleteToken=function(e,o){"use strict";tokenRegistry.removeOldTokens(),tokenRegistry.removeToken(e,function(r,t){r?(log.info("Consume token error:",r,e),o("callback","error")):(log.info("Consumed token ",t._id,"from room ",t.room," of service ",t.service),o("callback",t))})},exports.getRoomConfig=function(e,o){"use strict";roomRegistry.getRoom(e,function(e){return void 0===e?o("callback","error"):(e.mediaMixing=e.mediaMixing||{video:{avCoordinated:0,maxInput:16,resolution:0,bitrate:0,bkColor:0,layout:{base:0,custom:null}},audio:null},void 0===e.enableMixing&&(e.enableMixing=1),void o("callback",Room.genConfig(e)))})},exports.addNewErizoController=function(e,o){"use strict";cloudHandler.addNewErizoController(e,function(e){o("callback",e)})},exports.addNewErizoAgent=function(e,o){"use strict";cloudHandler.addNewErizoAgent(e,function(e){o("callback",e)})},exports.allocErizoAgent=function(e,o){"use strict";cloudHandler.allocErizoAgent(e,function(e){o("callback",e)})},exports.freeErizoAgent=function(e,o){"use strict";cloudHandler.freeErizoAgent(e,function(e){o("callback",e)})},exports.keepAlive=function(e,o){"use strict";cloudHandler.keepAlive(e,function(e){o("callback",e)})},exports.setInfo=function(e,o){"use strict";cloudHandler.setInfo(e),o("callback")},exports.killMe=function(e,o){"use strict";cloudHandler.killMe(e),o("callback")},exports.reschedule=function(e,o){"use strict";cloudHandler.reschedule(e),o("callback")},exports.getKey=function(e,o){"use strict";o("callback",cloudHandler.getKey(e))};