var roomRegistry=require("./../mdb/roomRegistry"),serviceRegistry=require("./../mdb/serviceRegistry"),cloudHandler=require("../cloudHandler"),logger=require("./../logger").logger,log=logger.getLogger("UsersResource"),currentService,currentRoom,doInit=function(e,r){"use strict";currentService=require("./../auth/nuveAuthenticator").service,serviceRegistry.getRoomForService(e,currentService,function(e){currentRoom=e,r()})};exports.getList=function(e,r){"use strict";doInit(e.params.room,function(){return void 0===currentService?void r.status(404).send("Service not found"):void 0===currentRoom?(log.info("Room ",e.params.room," not found"),void r.status(404).send("Room not found")):(log.info("Representing users for room ",currentRoom._id,"and service",currentService._id),void cloudHandler.getUsersInRoom(currentRoom._id,function(e){return"error"===e?void r.send([]):void r.send(e)}))})};